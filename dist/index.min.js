!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dtnClient=e():t.dtnClient=e()}(window,function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){var a=r(1);t.exports={GamClient:a}},function(t,e){function r(t){(t=t||{}).addScript=void 0===t.addScript||t.addScript,t.loadEvent=void 0!==t.loadEvent?t.loadEvent:"sv-adloaded",t.attrs=void 0!==t.attrs?t.attrs:{},t.attrs.adcomplete=void 0!==t.attrs.complete?t.attrs.complete:"data-sv-adcomplete",t.attrs.adunit=void 0!==t.attrs.adunit?t.attrs.adunit:"data-sv-adunit",t.attrs.adrecid=void 0!==t.attrs.adrecid?t.attrs.adrecid:"data-sv-adrecid",t.attrs.adsize=void 0!==t.attrs.adsize?t.attrs.adsize:"data-sv-adsize",t.attrs.adstyle=void 0!==t.attrs.adstyle?t.attrs.adstyle:"data-sv-adstyle",t.attrs.adclick=void 0!==t.attrs.adclick?t.attrs.adclick:"data-sv-adclick",t.attrs.adclickcapture=void 0!==t.attrs.adclickcapture?t.attrs.adclickcapture:"data-sv-adclickcapture",function(t){!0===t&&(e=document,r="script",a=e.getElementsByTagName(r)[0],(i=e.createElement(r)).async=!0,i.src="//www.googletagservices.com/tag/js/gpt.js",a.parentNode.insertBefore(i,a));var e,r,a,i;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().enableSingleRequest(),window.googletag.enableServices()})}(t.addScript),this._c=Math.floor(1e5*Math.random()),this._getAdTile=0,this._slotId=0,this._args=t,this._attrs=t.attrs}function a(t){var e=document.createElement("img");e.src=t,e.style="display: none;",document.querySelector("body").appendChild(e)}r.prototype.renderAds=function(){var t=this;document.querySelectorAll("["+t._attrs.adunit+"]:not(["+t._attrs.adcomplete+"])").forEach(function(e,r){e.setAttribute(t._attrs.adcomplete,""),""===e.id&&(e.id="sv-ad-"+t._slotId++);var i={id:e.id,adunit:e.getAttribute(t._attrs.adunit),adrecid:e.getAttribute(t._attrs.adrecid),adsize:e.getAttribute(t._attrs.adsize),adstyle:e.getAttribute(t._attrs.adstyle)||"iframe",adclickcapture:e.getAttribute(t._attrs.adclickcapture),template:e.innerHTML};if("iframe"===i.adstyle){if(null===i.adsize)return console.error("Adunit '"+i.adunit+"' requires "+t._attrs.adsize+".");var n=i.adsize.split("x").map(function(t){return Number(t)});window.googletag.cmd.push(function(){var t=window.googletag.defineSlot(i.adunit,n,i.id);null!==t&&(t=t.addService(window.googletag.pubads()),window.googletag.display(i.id))})}else if("html"===i.adstyle){if(null===i.adsize)return console.error("Adunit '"+i.adunit+"' requires "+t._attrs.adsize+".");t.getAd({adunit:i.adunit,size:i.adsize},function(r,a){if(r)return console.error(r);e.innerHTML=a,t._dispatchEvent(e,{adSlot:i,data:data})})}else if("template"===i.adstyle){if(null===i.adsize)return console.error("Adunit '"+i.adunit+"' requires "+t._attrs.adsize+".");t.getAd({adunit:i.adunit,size:i.adsize},function(r,n){if(r)return console.error(r);if(0!==n.length){var o=JSON.parse(n);if(void 0===o.impressionUrl)return console.error("Template adunit '"+i.adunit+"' requires an 'impressionUrl' in it's creative.");a(o.impressionUrl);var d=i.template;for(var s in o)d=d.replace(new RegExp("{{"+s+"}}","g"),o[s]);d=d.replace(/<\/?template>/g,""),e.innerHTML=d,t._dispatchEvent(e,{adSlot:i,data:o})}})}else if("recid"===i.adstyle){if(null===i.adrecid)return console.error("Adunit '"+i.adunit+"' requires "+t._attrs.adrecid+".");t.getAd({adunit:i.adunit,size:"1x1",targeting:"recid="+i.adrecid},function(r,n){if(r)return console.error(r);if(0!==n.length){for(var o=JSON.parse(n),d=["recid","impressionUrl","clickUrl"],s=0;s<d.length;s++){var l=d[s];if(void 0===o[l]||"string"!=typeof o[l]||0===o[l].length)return console.error("Featured listing ad templates require a valid '"+l+"'")}if(a(o.impressionUrl),e.querySelectorAll("["+t._attrs.adclick+"]").forEach(function(t){var e=t.getAttribute("href");if(null!==e)return null===e.match(/^https?:\/\//)?console.error("Unable to track non-absolute url '"+e+"'."):void t.setAttribute("href",o.clickUrl+e)}),null!==e.adclickcapture){var c=function(t){var r;r=o.clickUrl,navigator.sendBeacon?function(t){navigator.sendBeacon(t)}(r):a(r),e.removeEventListener("click",c,!0)};e.addEventListener("click",c,!0)}t._dispatchEvent(e,{adSlot:i,data:o})}})}})},r.prototype.getAd=function(t,e){if(void 0===(t=t||{}).adunit||void 0===t.size)return e(new Error("getAd requires args.adunit and args.size"));var r="";void 0!==t.targeting&&(r="&t="+encodeURIComponent(t.targeting));var a=new XMLHttpRequest,i="https://pubads.g.doubleclick.net/gampad/adx?iu="+encodeURIComponent(t.adunit)+"&sz="+encodeURIComponent(t.size)+"&c="+this._c+"&tile="+this._getAdTile+++r;a.open("GET",i),a.onload=function(){return 200===a.status?e(null,a.responseText):e(new Error("GAM returned '"+a.status+"' status code."))},a.send()},r.prototype._dispatchEvent=function(t,e){var r=document.createEvent("CustomEvent");r.initCustomEvent(this._args.loadEvent,!0,!0,e),t.dispatchEvent(r)},t.exports=r}])});