!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dtnClient=e():t.dtnClient=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){var n=r(1);t.exports={GamClient:n}},function(t,e){function r(t){(t=t||{}).addScript=void 0===t.addScript||t.addScript,t.loadEvent=void 0!==t.loadEvent?t.loadEvent:"sv-adloaded",t.attrs=void 0!==t.attrs?t.attrs:{},t.attrs.adcomplete=void 0!==t.attrs.complete?t.attrs.complete:"data-sv-adcomplete",t.attrs.adunit=void 0!==t.attrs.adunit?t.attrs.adunit:"data-sv-adunit",t.attrs.adrecid=void 0!==t.attrs.adrecid?t.attrs.adrecid:"data-sv-adrecid",t.attrs.adsize=void 0!==t.attrs.adsize?t.attrs.adsize:"data-sv-adsize",t.attrs.adstyle=void 0!==t.attrs.adstyle?t.attrs.adstyle:"data-sv-adstyle",t.attrs.adclick=void 0!==t.attrs.adclick?t.attrs.adclick:"data-sv-adclick",n(t.addScript),this._c=Math.floor(1e5*Math.random()),this._getAdTile=0,this._slotId=0,this._args=t,this._attrs=t.attrs}r.prototype.renderAds=function(){var t=this;document.querySelectorAll("["+t._attrs.adunit+"]:not(["+t._attrs.adcomplete+"])").forEach(function(e,r){e.setAttribute(t._attrs.adcomplete,""),""===e.id&&(e.id="sv-ad-"+t._slotId++);var n={id:e.id,adunit:e.getAttribute(t._attrs.adunit),adrecid:e.getAttribute(t._attrs.adrecid),adsize:e.getAttribute(t._attrs.adsize),adstyle:e.getAttribute(t._attrs.adstyle)||"iframe",template:e.innerHTML};if("iframe"===n.adstyle){if(null===n.adsize)return console.error("Adunit '"+n.adunit+"' requires "+t._attrs.adsize+".");var a=n.adsize.split("x").map(function(t){return Number(t)});window.googletag.cmd.push(function(){var t=window.googletag.defineSlot(n.adunit,a,n.id);null!==t&&(t=t.addService(window.googletag.pubads()),window.googletag.display(n.id))})}else if("html"===n.adstyle){if(null===n.adsize)return console.error("Adunit '"+n.adunit+"' requires "+t._attrs.adsize+".");t.getAd({adunit:n.adunit,size:n.adsize},function(t,r){if(t)return console.error(t);e.innerHTML=r})}else if("template"===n.adstyle){if(null===n.adsize)return console.error("Adunit '"+n.adunit+"' requires "+t._attrs.adsize+".");t.getAd({adunit:n.adunit,size:n.adsize},function(t,r){if(t)return console.error(t);if(0!==r.length){var a=JSON.parse(r),i=n.template;for(var o in a)i=i.replace(new RegExp("{{"+o+"}}","g"),a[o]);i=(i=i.replace(/{{[^}]*}}/g,"")).replace(/<\/?template>/g,""),e.innerHTML=i}})}else if("recid"===n.adstyle){if(null===n.adrecid)return console.error("Adunit '"+n.adunit+"' requires "+t._attrs.adrecid+".");t.getAd({adunit:n.adunit,size:"1x1",targeting:"recid="+n.adrecid},function(r,n){if(r)return console.error(r);if(0!==n.length){var a=JSON.parse(n),i=document.createElement("img");i.src=a.impressionUrl,i.style="display: none;",document.querySelector("body").appendChild(i),e.querySelectorAll("["+t._attrs.adclick+"]").forEach(function(t){var e=t.getAttribute("href");if(null!==e)return null===e.match(/^https?:\/\//)?console.error(new Error("Unable to track non-absolute url '"+e+"'")):void t.setAttribute("href",a.clickUrl+e)});var o=document.createEvent("CustomEvent");o.initCustomEvent(t._args.loadEvent,!0,!0,a),e.dispatchEvent(o)}})}})},r.prototype.getAd=function(t,e){if(void 0===(t=t||{}).adunit||void 0===t.size)return e(new Error("getAd requires args.adunit and args.size"));var r="";void 0!==t.targeting&&(r="&t="+encodeURIComponent(t.targeting));var n=new XMLHttpRequest,a="https://pubads.g.doubleclick.net/gampad/adx?iu="+encodeURIComponent(t.adunit)+"&sz="+encodeURIComponent(t.size)+"&c="+this._c+"&tile="+this._getAdTile+++r;n.open("GET",a),n.onload=function(){return 200===n.status?e(null,n.responseText):e(new Error("GAM returned '"+n.status+"' status code."))},n.send()};var n=function(t){var e,r,n,a;!0===t&&(e=document,r="script",n=e.getElementsByTagName(r)[0],(a=e.createElement(r)).async=!0,a.src="//www.googletagservices.com/tag/js/gpt.js",n.parentNode.insertBefore(a,n)),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().enableSingleRequest(),window.googletag.enableServices()})};t.exports=r}])});